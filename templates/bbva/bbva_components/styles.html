<!-- BBVA-Specific Styles -->
<style>
/* BBVA Color Palette */
:root {
    --bbva-blue: #004481;
    --bbva-light-blue: #1464A0;
    --bbva-navy: #043263;
    --bbva-accent: #2DCCCD;
    --bbva-light-accent: rgba(45, 204, 205, 0.1);
    --bbva-grey: #6c757d;
    --bbva-light-grey: #f8f9fa;
}

/* Main Container */
.banks-parse-container {
    padding: 2rem 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

/* Calendar Section Styling */
.calendar-section {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    padding: 2rem;
    margin-top: 2rem;
}

/* Calendar Grid Enhancements */
.calendar-container {
    width: 100%;
}

.calendar-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--bbva-light-grey);
}

.calendar-header h3 {
    color: var(--bbva-blue);
    font-weight: 600;
    margin: 0;
    font-size: 1.5rem;
}

.months-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    max-width: 1400px;
    margin: 0 auto;
}

/* Month Square Styling */
.month-square {
    background: white;
    border: 2px solid #e9ecef;
    border-radius: 1rem;
    padding: 1.5rem;
    min-height: 180px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.month-square:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 68, 129, 0.15);
    border-color: var(--bbva-accent);
}

.month-header {
    text-align: center;
    margin-bottom: 1rem;
}

.month-name {
    display: block;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--bbva-blue);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.month-year {
    display: block;
    font-size: 0.9rem;
    color: var(--bbva-grey);
    font-weight: 500;
    margin-top: 0.25rem;
}

.month-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
}

/* File and Parse Status */
.file-status, .parse-status {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    border-radius: 0.5rem;
    background: var(--bbva-light-grey);
    width: 100%;
    transition: all 0.2s ease;
}

.file-status {
    border-left: 4px solid var(--bbva-grey);
}

.file-status.has-file {
    border-left-color: #dc3545; /* Red for PDFs */
    background: rgba(220, 53, 69, 0.05);
}

.parse-status {
    border-left: 4px solid var(--bbva-grey);
}

.parse-status.parsed {
    border-left-color: var(--bbva-blue);
    background: var(--bbva-light-accent);
}

.file-name {
    font-size: 0.8rem;
    font-weight: 500;
    text-align: center;
    color: var(--bbva-grey);
    line-height: 1.3;
}

.file-status.has-file .file-name {
    color: #dc3545;
    font-weight: 600;
}

.parse-status.parsed .record-count {
    color: var(--bbva-blue);
    font-weight: 600;
}

/* Month Status Border - Enhanced */
.month-border {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 6px;
    border-radius: 0 0 1rem 1rem;
}

.month-border.complete {
    background: linear-gradient(90deg, #28a745, #20c997);
}

.month-border.partial {
    background: linear-gradient(90deg, #ffc107, #fd7e14);
}

.month-border.missing {
    background: linear-gradient(90deg, #dc3545, #e83e8c);
}

/* Account Header Enhancements */
.account-header {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: 1.5rem 2rem;
    margin-bottom: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.account-info h2 {
    color: var(--bbva-blue);
    font-weight: 600;
    margin: 0;
    font-size: 1.5rem;
}

.account-description {
    color: var(--bbva-grey);
    margin: 0.5rem 0 0 0;
    font-size: 0.95rem;
}

.account-actions {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    flex-wrap: wrap;
}

/* Button Enhancements */
.btn {
    border-radius: 0.5rem;
    font-weight: 500;
    padding: 0.75rem 1.5rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

.btn:hover:before {
    left: 100%;
}

.btn-primary {
    background: var(--bbva-blue);
    border-color: var(--bbva-blue);
}

.btn-primary:hover {
    background: var(--bbva-navy);
    border-color: var(--bbva-navy);
    transform: translateY(-1px);
}

.parse-btn {
    background: linear-gradient(135deg, var(--bbva-blue), var(--bbva-light-blue));
    border: none;
}

.export-btn {
    background: linear-gradient(135deg, #28a745, #20c997);
    border: none;
}

.review-btn {
    background: linear-gradient(135deg, #17a2b8, var(--bbva-accent));
    border: none;
}

.upload-btn {
    background: linear-gradient(135deg, var(--bbva-accent), #17a2b8);
    border: 2px solid var(--bbva-accent);
    color: var(--bbva-blue);
}

.upload-btn:hover {
    background: var(--bbva-accent);
    color: white;
}

/* Account Summary Enhancements */
.account-summary {
    background: var(--bbva-light-grey);
    border-radius: 0.75rem;
    padding: 1rem 1.5rem;
    margin-top: 1rem;
}

.summary-stats {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    background: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.stat-label {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--bbva-grey);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-value {
    font-size: 1.25rem;
    font-weight: 700;
    margin: 0;
}

/* BBVA-Specific Calendar Styles */
.bbva-calendar .file-icons {
    justify-content: center; /* Center the single PDF icon */
}

.bbva-calendar .excel-icon,
.bbva-calendar .excel-icon-missing {
    display: none !important; /* Hide Excel icons completely for BBVA */
}

/* BBVA Account Info Styles */
.bbva-account-info .table th:nth-child(3),
.bbva-account-info .table td:nth-child(3) {
    display: none; /* Hide Excel column in account info */
}

/* CRITICAL FIX: BBVA-specific icon colors that should NEVER change */
.bbva-calendar .parse-icon-parsed,
[data-system-type="bbva"] .parse-icon-parsed {
    color: #0066cc !important;
    /* Use maximum specificity to override any JavaScript or CSS changes */
}

/* Force blue color for parsed database icons in BBVA system */
.bbva-calendar .fas.fa-database.parse-icon-parsed,
[data-system-type="bbva"] .fas.fa-database.parse-icon-parsed {
    color: #0066cc !important;
}

/* Additional protection: Target specific containers */
.card.bbva-calendar .parse-indicator-with-count .fas.fa-database.parse-icon-parsed {
    color: #0066cc !important;
}

/* Prevent ANY override on BBVA parsed icons */
.month-square[data-account^="0121"] .fas.fa-database.parse-icon-parsed,
.month-square[data-account^="0120"] .fas.fa-database.parse-icon-parsed {
    color: #0066cc !important;
}

/* Ensure parsed status maintains blue color regardless of JavaScript */
.parse-status-parsed .fas.fa-database.parse-icon-parsed {
    color: #0066cc !important;
}

/* Override any potential inline styles that JavaScript might add */
.parse-icon-parsed[style*="color"] {
    color: #0066cc !important;
}

/* Additional specificity for BBVA accounts (by CLABE patterns) */
div[data-account="012180001198203451"] .parse-icon-parsed,
div[data-account="012180001201205883"] .parse-icon-parsed,
div[data-account="012180001182790637"] .parse-icon-parsed,
div[data-account="012222001182793149"] .parse-icon-parsed,
div[data-account="012180001232011635"] .parse-icon-parsed,
div[data-account="012180001232011554"] .parse-icon-parsed {
    color: #0066cc !important;
}

/* Ensure the entire indicator maintains its styling */
.bbva-calendar .parse-indicator-with-count .fas.fa-database {
    transition: none !important;
    color: #6c757d; /* Default grey */
}

.bbva-calendar .parse-indicator-with-count .fas.fa-database.parse-icon-parsed {
    color: #0066cc !important; /* Force blue for parsed */
    transition: none !important;
}

/* Status Complete styling for BBVA */
.status-complete {
    background-color: rgba(40, 167, 69, 0.1);
    border-left: 4px solid #28a745;
}

.status-complete .badge {
    background-color: #28a745 !important;
}

/* PDF-only month squares */
.bbva-month-square .file-icons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0; /* No gap needed with single icon */
}

.bbva-month-square .pdf-icon {
    font-size: 1.5em; /* Larger since it's the only icon */
}

/* Responsive Design */
@media (max-width: 1200px) {
    .months-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .banks-parse-container {
        padding: 1rem 0;
    }
    
    .calendar-section {
        padding: 1rem;
        margin-top: 1rem;
    }
    
    .months-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 0.75rem;
    }
    
    .month-square {
        min-height: 140px;
        padding: 1rem;
    }
    
    .month-name {
        font-size: 1rem;
    }
    
    .account-header {
        flex-direction: column;
        align-items: stretch;
        padding: 1rem;
    }
    
    .account-actions {
        justify-content: center;
    }
    
    .summary-stats {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .stat-item {
        width: 100%;
        flex-direction: row;
        justify-content: space-between;
    }
}

@media (max-width: 576px) {
    .months-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .account-actions {
        flex-direction: column;
        width: 100%;
    }
    
    .btn {
        width: 100%;
        margin-bottom: 0.5rem;
    }
}

/* Animation for loading states */
@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.loading {
    animation: pulse 1.5s ease-in-out infinite;
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Focus states for accessibility */
.month-square:focus,
.btn:focus,
.account-tab:focus {
    outline: 2px solid var(--bbva-accent);
    outline-offset: 2px;
}
</style>